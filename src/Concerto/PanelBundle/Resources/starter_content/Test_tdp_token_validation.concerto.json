{
    "version": "5.0.beta.5.0",
    "collection": [
        {
            "class_name": "Test",
            "id": 17,
            "name": "source_tdp_token_validation",
            "accessibility": 0,
            "archived": "0",
            "visibility": 2,
            "type": 0,
            "code": "library(httr)\n\nprint(\"validating token:\")\nprint(token)\n\nconfig = add_headers(\"Content-Type\"=\"application\/json\",\"Authorization\"=authorization_header)\nbody = toJSON(list(\n  distributorId=distributor_id,\n  value=token,\n  clientIp=concerto$client$ip,\n  assessmentId=assessment_id\n))\nprint(body)\n\n.branch = tryCatch({\n  resp = POST(api_endpoint, config, body=body)\n  concerto.log(content(resp))\n  if(resp$status_code==200) {\n    resp_status = content(resp)$status\n    if(resp_status == \"OK\") {\n      \"success\"\n    } else {\n      error_cause = content(resp)$cause\n      if(error_cause == \"INVALID\") {\n        \"invalid\"\n      } else if(error_cause == \"EXPIRED\") {\n        \"expired\"\n      } else {\n        \"error\"\n      }\n    }\n  }\n}, error = function(e) {\n  concerto.log(e)\n  \"error\"\n})",
            "outdated": "0",
            "description": "",
            "variables": [
                {
                    "class_name": "TestVariable",
                    "id": 41,
                    "name": "success",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": "0",
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 42,
                    "name": "api_endpoint",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 43,
                    "name": "distributor_id",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 44,
                    "name": "authorization_header",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 45,
                    "name": "token",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 46,
                    "name": ".branch",
                    "type": 1,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 47,
                    "name": "expired",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 48,
                    "name": "invalid",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 49,
                    "name": "error",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                },
                {
                    "class_name": "TestVariable",
                    "id": 59,
                    "name": "assessment_id",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 17,
                    "parentVariable": null
                }
            ],
            "sourceWizard": null,
            "sourceWizardName": null,
            "sourceWizardTest": null,
            "sourceWizardTestName": null,
            "updatedOn": "2018-03-28 13:11:54",
            "updatedBy": "admin",
            "nodes": [],
            "nodesConnections": [],
            "tags": "",
            "owner": 1,
            "groups": "",
            "starterContent": true,
            "hash": "7081a7b2a0a737c98a7d4bfd9531a2aa3feb941e"
        },
        {
            "class_name": "TestWizard",
            "id": 7,
            "name": "tdp_token_validation",
            "description": "",
            "accessibility": 0,
            "archived": "0",
            "steps": [
                {
                    "class_name": "TestWizardStep",
                    "id": 6,
                    "title": "Configuration",
                    "description": "",
                    "orderNum": 0,
                    "colsNum": 0,
                    "wizard": 7,
                    "params": [
                        {
                            "class_name": "TestWizardParam",
                            "id": 13,
                            "label": "API endpoint",
                            "description": "",
                            "hideCondition": "",
                            "type": 0,
                            "passableThroughUrl": "0",
                            "value": "https:\/\/tdp.e-psychometrics.com\/api\/tokens\/auth",
                            "testVariable": 42,
                            "name": "api_endpoint",
                            "wizardStep": 6,
                            "stepTitle": "Configuration",
                            "order": 0,
                            "wizard": 7,
                            "definition": {
                                "placeholder": 0,
                                "defvalue": "https:\/\/tdp.e-psychometrics.com\/api\/tokens\/auth"
                            }
                        },
                        {
                            "class_name": "TestWizardParam",
                            "id": 14,
                            "label": "Authorization header",
                            "description": "",
                            "hideCondition": "",
                            "type": 0,
                            "passableThroughUrl": "0",
                            "value": "",
                            "testVariable": 44,
                            "name": "authorization_header",
                            "wizardStep": 6,
                            "stepTitle": "Configuration",
                            "order": 0,
                            "wizard": 7,
                            "definition": {
                                "placeholder": 0
                            }
                        },
                        {
                            "class_name": "TestWizardParam",
                            "id": 15,
                            "label": "Distributor id",
                            "description": "",
                            "hideCondition": "",
                            "type": 0,
                            "passableThroughUrl": "0",
                            "value": "",
                            "testVariable": 43,
                            "name": "distributor_id",
                            "wizardStep": 6,
                            "stepTitle": "Configuration",
                            "order": 0,
                            "wizard": 7,
                            "definition": {
                                "placeholder": 0
                            }
                        },
                        {
                            "class_name": "TestWizardParam",
                            "id": 16,
                            "label": "Assessment id",
                            "description": "",
                            "hideCondition": "",
                            "type": 0,
                            "passableThroughUrl": "0",
                            "value": "",
                            "testVariable": 59,
                            "name": "assessment_id",
                            "wizardStep": 6,
                            "stepTitle": "Configuration",
                            "order": 0,
                            "wizard": 7,
                            "definition": {
                                "placeholder": 0
                            }
                        }
                    ]
                }
            ],
            "test": 17,
            "testName": "source_tdp_token_validation",
            "updatedOn": "2018-03-28 13:10:39",
            "updatedBy": "",
            "owner": 1,
            "groups": "",
            "starterContent": true,
            "hash": "ff13c864e0165af5472c5bbea6fff2df466d6237"
        },
        {
            "class_name": "Test",
            "id": 18,
            "name": "tdp_token_validation",
            "accessibility": 0,
            "archived": "0",
            "visibility": 2,
            "type": 1,
            "code": "library(httr)\n\nprint(\"validating token:\")\nprint(token)\n\nconfig = add_headers(\"Content-Type\"=\"application\/json\",\"Authorization\"=authorization_header)\nbody = toJSON(list(\n  distributorId=distributor_id,\n  value=token,\n  clientIp=concerto$client$ip,\n  assessmentId=assessment_id\n))\nprint(body)\n\n.branch = tryCatch({\n  resp = POST(api_endpoint, config, body=body)\n  concerto.log(content(resp))\n  if(resp$status_code==200) {\n    resp_status = content(resp)$status\n    if(resp_status == \"OK\") {\n      \"success\"\n    } else {\n      error_cause = content(resp)$cause\n      if(error_cause == \"INVALID\") {\n        \"invalid\"\n      } else if(error_cause == \"EXPIRED\") {\n        \"expired\"\n      } else {\n        \"error\"\n      }\n    }\n  }\n}, error = function(e) {\n  concerto.log(e)\n  \"error\"\n})",
            "outdated": "0",
            "description": "",
            "variables": [
                {
                    "class_name": "TestVariable",
                    "id": 50,
                    "name": "success",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": "0",
                    "test": 18,
                    "parentVariable": 41
                },
                {
                    "class_name": "TestVariable",
                    "id": 51,
                    "name": "api_endpoint",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 42
                },
                {
                    "class_name": "TestVariable",
                    "id": 52,
                    "name": "distributor_id",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 43
                },
                {
                    "class_name": "TestVariable",
                    "id": 53,
                    "name": "authorization_header",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 44
                },
                {
                    "class_name": "TestVariable",
                    "id": 54,
                    "name": "token",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 45
                },
                {
                    "class_name": "TestVariable",
                    "id": 55,
                    "name": ".branch",
                    "type": 1,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 46
                },
                {
                    "class_name": "TestVariable",
                    "id": 56,
                    "name": "expired",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 47
                },
                {
                    "class_name": "TestVariable",
                    "id": 57,
                    "name": "invalid",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 48
                },
                {
                    "class_name": "TestVariable",
                    "id": 58,
                    "name": "error",
                    "type": 2,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": null,
                    "test": 18,
                    "parentVariable": 49
                },
                {
                    "class_name": "TestVariable",
                    "id": 60,
                    "name": "assessment_id",
                    "type": 0,
                    "description": "",
                    "passableThroughUrl": "0",
                    "value": "",
                    "test": 18,
                    "parentVariable": 59
                }
            ],
            "sourceWizard": 7,
            "sourceWizardName": "tdp_token_validation",
            "sourceWizardTest": 17,
            "sourceWizardTestName": "source_tdp_token_validation",
            "updatedOn": "2018-03-28 13:11:55",
            "updatedBy": "admin",
            "nodes": [],
            "nodesConnections": [],
            "tags": "",
            "owner": 1,
            "groups": "",
            "starterContent": true,
            "hash": "e0b722628aecdc7db85b2ce926d6d62df0b9ad81"
        }
    ]
}